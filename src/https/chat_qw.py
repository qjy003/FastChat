# 标准库和第三方库导入import typingfrom pydantic import BaseModel# typing 模块中的类型可以合并导入from typing import Any, Dict# 应用程序内部的导入from src.base.http import HttpInterfaceclass ChatQW(HttpInterface):    """    Http接口服务模块儿    """    def define_request_format(self) -> type(Any):        """        你需要当前的http接口所接收的请求数据的格式定义        Returns: Http服务接口接收请求数据的格式的类类型        """        class Message(BaseModel):            role: str            content: str        class ReceivedInfo(BaseModel):            data: typing.Dict[str, str] = dict()            stage: str            original_stage: str = 'greeting'        class RequestFormat(BaseModel):            messages: typing.List[Message] = []            customer_info: typing.Dict[str, str] = {}            robot_name: str            received_info: ReceivedInfo        return RequestFormat    def gen_request(self, request_id: str, req: Dict) -> Dict:        """        生成向对话应用进行请求的数据        Args:            req: http结果接收到的请求数据        Returns: 向对话应用发出的请求数据        """        conversation_history = [f"{message.get('role')}:{message.get('content')}" for message in req.get('messages')]        return {            'conversation_history': conversation_history,            'customer_info': req.get('customer_info'),            'robot_name': req.get('robot_name'),            'received_info': req.get('received_info')        }    def process_inference_results(self, request_id, req, inference_results) -> Any:        """        将对话应用处理并返回的数据进行处理并返回给调用者        Args:            req: 当前的http接口的请求数据            inference_results: 对话应用处理后返回的结果        Returns: 返回给调用者的数据        """        return inference_results    def get_request_id(self, req: dict):        return req["request_id"]